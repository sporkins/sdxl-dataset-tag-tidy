<div class="card stack">
    <div class="row wrap" style="justify-content: space-between;">
        <div>
            <div class="small">Current</div>
            <div style="word-break: break-all;">{{ browse.current.rel if browse.current.rel else 'training (root)' }}</div>
        </div>
        <div class="row" style="gap: 0.35rem;">
            {% if browse.parent.rel != browse.current.rel %}
            <button class="secondary" hx-get="/?rel={{ browse.parent.rel | urlencode }}" hx-target="#folder-browser" hx-swap="outerHTML">Up</button>
            {% endif %}
            <button class="secondary" id="choose-folder" data-rel="{{ browse.current.rel }}">Select</button>
        </div>
    </div>
    <div class="grid" id="folder-list">
        {% if browse.dirs %}
            {% for d in browse.dirs %}
            {% set child_rel = browse.current.rel ~ '/' ~ d.name if browse.current.rel else d.name %}
            <button class="secondary" hx-get="/?rel={{ child_rel | urlencode }}" hx-target="#folder-browser" hx-swap="outerHTML">{{ d.name }}</button>
            {% endfor %}
        {% else %}
            <div class="small">No subfolders</div>
        {% endif %}
    </div>
    <div class="small">Eligible images in folder tree: {{ browse.summary.eligible_image_count_recursive }}</div>
</div>
